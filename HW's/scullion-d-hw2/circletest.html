<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Sine Start</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
    <script>
        "use strict";
        const canvasWidth = 1440, canvasHeight = 900;
        let ctx;
        let circle;

        window.onload = init;

        class Point {
            constructor(xPos, yPos, zPos) {
                this.x = xPos;
                this.y = yPos;
                this.z = zPos;
                this.trueY = yPos;
            }
        }

        class Sphere {
            constructor(radius) {
                this.boundry = new Array();
                this.radius = radius;
                this.numberOfVertices = 0;

                // Establish x and z position of points
                for (let i = 0; i <= 2 * Math.PI; i += .17) {
                    this.boundry[this.numberOfVertices] = new Point(Math.cos(i) * this.radius, 0, Math.sin(i) * this.radius);
                    this.numberOfVertices++;
                }

                // Create Vertical points in line with center ring
                for (let direction = 1; direction >= -1; direction -= 2) {
                    for (let j = 0.17; j < 1.51; j += .17) {
                        let radius = Math.cos(j) * this.radius;
                        let fixedY = Math.sin(j) * this.radius * direction;

                        // Establish all x and z positions on ring
                        for (let i = 0; i < 6.28; i += 0.17) {
                            this.boundry[this.numberOfVertices] = new Point(Math.cos(i) * radius, fixedY, Math.sin(i) * radius);
                            this.numberOfVertices++;
                        }
                    }
                }
            }

            drawCircle() {
                let currentYRow = this.boundry[0].trueY;
                let firstPoint = this.boundry[0];

                ctx.lineWidth = 1;
                ctx.strokeStyle = "red";
                ctx.fillStyle = "red";
                ctx.moveTo(canvasWidth / 2 + this.boundry[0].x, canvasHeight / 2 + this.boundry[0].y);
                ctx.beginPath();
                
                

                for (let i = 0; i < this.numberOfVertices; i++) {
                    if (this.boundry[i].trueY != currentYRow) {
                        //ctx.lineTo(canvasWidth / 2 + firstPoint.x, canvasHeight / 2 - firstPoint.y);
                        ctx.closePath();
                        
                        ctx.stroke();
                        

                        // Move on to next line
                        currentYRow = this.boundry[i].trueY;
                        firstPoint = this.boundry[i];

                        ctx.moveTo(canvasWidth / 2 + this.boundry[i].x, canvasHeight / 2 + this.boundry[i].y);
                        ctx.beginPath();
                        

                    }
                    else {
                        ctx.lineTo(canvasWidth / 2 + this.boundry[i].x, canvasHeight / 2 - this.boundry[i].y);
                    }
                }

                /*ctx.closePath();
                ctx.stroke();*/
            }

            rotateX(radians) {
                for (const point of this.boundry) {
                    let y = point.y;
                    point.y = (y * Math.cos(radians)) + (point.z * Math.sin(radians) * -1.0);
                    point.z = (y * Math.sin(radians)) + (point.z * Math.cos(radians));
                }
            }

            rotateY(radians) {
                for (const point of this.boundry) {
                    let x = point.x;
                    point.x = (x * Math.cos(radians)) + (point.z * Math.sin(radians) * -1.0);
                    point.z = (x * Math.sin(radians)) + (point.z * Math.cos(radians));
                }
            }

            rotateZ(radians) {
                for (const point of this.boundry) {
                    let x = point.x;
                    point.x = (x * Math.cos(radians)) + (point.y * Math.sin(radians) * -1.0);
                    point.y = (x * Math.sin(radians)) + (point.y * Math.cos(radians));
                }
            }
        }

        function init() {
            ctx = canvas.getContext("2d");
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            ctx.fillRect(0, 0, canvasWidth, canvasHeight);

            circle = new Sphere(100);
            ctx.strokeStyle = "red";

            ctx.fillStyle = "red"
            loop();
        }


        function loop() {
            setTimeout(loop, 1000 / 15);
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, canvasWidth, canvasHeight);

            ctx.fillStyle = "red";
            circle.rotateX(.05);
            circle.rotateY(.03);
            circle.rotateZ(.01);
            circle.drawCircle();
        }

    </script>
</head>

<body>
    <canvas id="canvas"></canvas>
</body>

</html>